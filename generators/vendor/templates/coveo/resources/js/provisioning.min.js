var Coveo;!function(e){e.t=function(t,n){return $(e.loadTemplate(t,n))},e.loadTemplate=function(t,n){null==n&&(n={}),null==e.templates&&(e.templates={}),null==e.Provisioning.templates&&(e.Provisioning.templates={}),null==e.Configuration.templates&&(e.Configuration.templates={}),n.t=n.t||e.loadTemplate;var o=e.templates[t]?e.templates[t]:e.Provisioning.templates[t]?e.Provisioning.templates[t]:e.Configuration.templates[t];return o(n)}}(Coveo||(Coveo={}));var Coveo;!function(e){var t;!function(t){t.t=e.t}(t=e.Provisioning||(e.Provisioning={}))}(Coveo||(Coveo={}));var Coveo;!function(e){var t;!function(t){t.t=e.t}(t=e.Configuration||(e.Configuration={}))}(Coveo||(Coveo={}));var Coveo;!function(e){var t=function(){function e(){}return e.getHash=function(t){void 0===t&&(t=window);var n="#"+(t.location.href.split("#")[1]||"");return e.getAjaxcrawlableHash(n)},e.getValue=function(t,n){n=e.getAjaxcrawlableHash(n);var o=e.getRawValue(t,n);return void 0!=o&&(o=e.getValueDependingOnType(o)),o},e.encodeValues=function(t){var n=[];return _.each(t,function(t,o,i){var r="";r=_.isEmpty(t)?_.isObject(t)&&!_.isEmpty(_.keys(t))?e.encodeObject(t):encodeURIComponent(t.toString()):e.encodeArray(t),""!=r&&n.push(o+"="+r)}),n.join("&")},e.getAjaxcrawlableHash=function(e){return void 0!=e[1]&&"!"==e[1]?e.substring(0,1)+e.substring(2):e},e.getRawValue=function(e,t){for(var n=t.substr(1).split("&"),o=0,i=!0,r=void 0;i;){var s=n[o].split("=");s[0]==e?(i=!1,r=s[1]):(o++,o>=n.length&&(o=void 0,i=!1))}return r},e.getValueDependingOnType=function(t){var n,o=e.getValueType(t);return n="object"==o?e.decodeObject(t):"array"==o?e.decodeArray(t):decodeURIComponent(t)},e.getValueType=function(t){return e.isObject(t)?"object":e.isArray(t)?"array":"other"},e.isArrayStartNotEncoded=function(t){return t.substr(0,1)==e.Delimiter.arrayStart},e.isArrayStartEncoded=function(t){return 0==t.indexOf(encodeURIComponent(e.Delimiter.arrayStart))},e.isArrayEndNotEncoded=function(e){return e.substr(e.length-1)},e.isArrayEndEncoded=function(t){return t.indexOf(encodeURIComponent(e.Delimiter.arrayEnd))==t.length-encodeURIComponent(e.Delimiter.arrayEnd).length},e.isObjectStartNotEncoded=function(t){return t.substr(0,1)==e.Delimiter.objectStart},e.isObjectStartEncoded=function(t){return 0==t.indexOf(encodeURIComponent(e.Delimiter.objectStart))},e.isObjectEndNotEncoded=function(t){return t.substr(t.length-1)==e.Delimiter.objectEnd},e.isObjectEndEncoded=function(t){return t.indexOf(encodeURIComponent(e.Delimiter.objectEnd))==t.length-encodeURIComponent(e.Delimiter.objectEnd).length},e.isObject=function(t){var n=e.isObjectStartNotEncoded(t)||e.isObjectStartEncoded(t),o=e.isObjectEndNotEncoded(t)||e.isObjectEndEncoded(t);return n&&o},e.isArray=function(t){var n=e.isArrayStartNotEncoded(t)||e.isArrayStartEncoded(t),o=e.isArrayEndNotEncoded(t)||e.isArrayEndEncoded(t);return n&&o},e.encodeArray=function(t){var n=[];return _.each(t,function(e){n.push(encodeURIComponent(e))}),e.Delimiter.arrayStart+n.join(",")+e.Delimiter.arrayEnd},e.encodeObject=function(t){var n=e.Delimiter.objectStart,o=[];return _.each(t,function(t,n,i){var r="";r+='"'+encodeURIComponent(n)+'" : ',r+=_.isArray(t)?e.encodeArray(t):_.isObject(t)?e.encodeObject(t):_.isNumber(t)||_.isBoolean(t)?encodeURIComponent(t):'"'+encodeURIComponent(t)+'"',o.push(r)}),n+=o.join(" , "),n+e.Delimiter.objectEnd},e.decodeObject=function(t){return e.isObjectStartEncoded(t)&&e.isObjectEndEncoded(t)&&(t=t.replace(/encodeURIComponent(HashUtils.Delimiter.objectStart)/,e.Delimiter.objectStart),t=t.replace(encodeURIComponent(e.Delimiter.objectEnd),e.Delimiter.objectEnd)),JSON.parse(decodeURIComponent(t))},e.decodeArray=function(t){e.isArrayStartEncoded(t)&&e.isArrayEndEncoded(t)&&(t=t.replace(encodeURIComponent(e.Delimiter.arrayStart),e.Delimiter.arrayStart),t=t.replace(encodeURIComponent(e.Delimiter.arrayEnd),e.Delimiter.arrayEnd)),t=t.substr(1),t=t.substr(0,t.length-1);var n=t.split(",");return _.map(n,function(e){return decodeURIComponent(e)})},e.Delimiter={objectStart:"{",objectEnd:"}",arrayStart:"[",arrayEnd:"]",objectStartRegExp:"^{",objectEndRegExp:"}+$",arrayStartRegExp:"^[",arrayEndRegExp:"]+$"},e}();e.HashUtils=t}(Coveo||(Coveo={}));var Coveo;!function(e){var t=function(){function t(t,n,o,i){var r=this;void 0===n&&(n=!1),this.label=t,this.active=n,this.element=e.t("switch",this);var s=this.element.find(".coveo-switch");this.active&&s.addClass("coveo-active"),this.element.click(function(){r.active=!r.active,s.toggleClass("coveo-active",r.active)})}return t}();e.Switch=t}(Coveo||(Coveo={}));var Coveo;!function(e){var t;!function(t){var n=function(){function n(n,o){var i=this;this.element=n,this.alreadySetupSection=t.t("setupOrgPanel_alreadySetup").appendTo(this.element),this.buildLinkToOnPremSection(o),this.linkToCloudSection=t.t("setupOrgPanel_linkToCloud",o.options).appendTo(this.element),this.linkToCloudSection.find(".coveo-button").click(function(){return o.options.onLinkToExistingCloud()});var r=this.alreadySetupSection.find(".coveo-setup-org-already-setup-cloud a"),s=this.linkToCloudSection.find("a");r.click(function(){i.element.addClass("coveo-showing-cloud")}),s.click(function(){i.element.removeClass("coveo-showing-cloud")}),this.chooseOrgNameSection=t.t("setupOrgPanel_chooseOrgName").appendTo(this.element);var a=this.chooseOrgNameSection.find("input"),c=this.chooseOrgNameSection.find(".coveo-error");this.chooseSalesforceContentSection=t.t("setupOrgPanel_chooseSalesforceContent").appendTo(this.element);var l=this.chooseSalesforceContentSection.find(".coveo-setup-org-choose-salesforce-content-selection-switches"),u=[new e.Switch("SalesforceStandardObjects",(!0)),new e.Switch("SalesforceKnowledgeBase",(!0)),new e.Switch("SalesforceContent",(!0))];_.each(u,function(e){e.element.appendTo(l)}),this.buildCreateOrgSection(o,c,a,u)}return n.prototype.buildCreateOrgSection=function(e,n,o,i){this.createOrgSection=t.t("setupOrgPanel_createOrg",e.options).appendTo(this.element),this.createOrgSection.find(".coveo-button").click(function(){e.resetError(n);var t=o.val(),r=_.map(i,function(e){return e.active});""==t?e.addError(n,"SetupOrgNameEmptyError".toLocaleString()):e.options.onCreateOrg(t,r[0],r[1],r[2])})},n.prototype.buildLinkToOnPremSection=function(e){var n=this;this.linkToOnPremiseSection=t.t("setupOrgPanel_linkToOnPremise",e.options).appendTo(this.element);var o=this.linkToOnPremiseSection.find("input"),i=this.linkToOnPremiseSection.find(".coveo-error"),r=this.alreadySetupSection.find(".coveo-setup-org-already-setup-onprem a"),s=this.linkToOnPremiseSection.find("a");r.click(function(){n.element.addClass("coveo-showing-on-premise")}),s.click(function(){n.element.removeClass("coveo-showing-on-premise")}),this.linkToOnPremiseSection.find(".coveo-button").click(function(){e.resetError(i),""==o.val()?e.addError(i,"SetupOrgLinkOnPremiseError".toLocaleString()):e.options.onLinkToExistingOnPrem(o.val())})},n}();t.SetupOrgPanel=n}(t=e.Provisioning||(e.Provisioning={}))}(Coveo||(Coveo={}));var Coveo;!function(e){var t=function(){function t(e,t){this.element=e,this.baseResourcesUrl=t}return t.prototype.setSourcesStatus=function(t){t&&0!=t.length&&(this.tableSection&&this.tableSection.remove(),this.tableSection=e.t("table",{tableRows:t}).appendTo(this.element))},t.prototype.prepareRefresh=function(){this.tableSection||(this.tableSection=e.t("tableWaiting",{baseResourcesUrl:this.baseResourcesUrl}).appendTo(this.element))},t}();e.StandaloneIndexContent=t}(Coveo||(Coveo={}));var Coveo;!function(e){var t;!function(t){var n=function(){function n(n,o){var i=this;this.element=n,this.mainPanel=o,this.titleSection=t.t("indexContentPanel_title",o.options).appendTo(this.element),this.tableSection=t.t("indexContentPanel_indexContentContainer").appendTo(this.element),this.standaloneIndexContent=new e.StandaloneIndexContent(this.tableSection,o.options.baseResourcesUrl),this.continueSection=t.t("indexContentPanel_continue").appendTo(this.element),this.skipSection=t.t("indexContentPanel_skip").appendTo(this.element),this.activateContinueOnce=_.once(function(){i.continueSection.addClass("coveo-active"),i.continueSection.find(".coveo-button").click(function(){return i.goToNextStep()})}),this.skipSection.find("a").click(function(){i.goToNextStep()})}return n.prototype.prepareRefresh=function(){this.standaloneIndexContent.prepareRefresh()},n.prototype.setSourcesStatus=function(e){this.standaloneIndexContent.setSourcesStatus(e),_.every(e,function(e){return e.numberOfDocuments>0||e.isFinished})&&this.activateContinueOnce()},n.prototype.goToNextStep=function(){this.mainPanel.setActive(3),this.mainPanel.setAsFinished(1),this.mainPanel.setAsFinished(2),this.mainPanel.setUnableToReach(1),this.mainPanel.setUnableToReach(2)},n}();t.IndexContentPanel=n}(t=e.Provisioning||(e.Provisioning={}))}(Coveo||(Coveo={}));var Coveo;!function(e){var t;!function(e){var t=function(){function t(t,n){this.element=t,this.introSection=e.t("configureSearchPanel_intro").appendTo(this.element),this.configureSection=e.t("configureSearchPanel_editor",n.options).appendTo(this.element),this.helpSection=e.t("configureSearchPanel_help",n.options).appendTo(this.element)}return t}();e.ConfigureSearchPanel=t}(t=e.Provisioning||(e.Provisioning={}))}(Coveo||(Coveo={}));var Coveo;!function(e){var t;!function(t){var n=function(){function n(e,o){this.element=e,this.options=o,this.headers=[],this.content=[],this.options=_.extend(n.defaultOptions,o),this.headerForSetupOrg=t.t("setupOrgPanel_header").appendTo(this.element),this.headerForIndexContent=t.t("indexContentPanel_header").appendTo(this.element),this.headerForConfigureSearch=t.t("configureSearchPanel_header").appendTo(this.element),this.contentForSetupOrg=t.t("setupOrgPanel_main").appendTo(this.element),this.contentForIndexContent=t.t("indexContentPanel_main").appendTo(this.element),this.contentForConfigureSearch=t.t("configureSearchPanel_main").appendTo(this.element),this.headers.push(this.headerForSetupOrg,this.headerForIndexContent,this.headerForConfigureSearch),this.content.push(this.contentForSetupOrg,this.contentForIndexContent,this.contentForConfigureSearch),this.setupOrgPanel=new t.SetupOrgPanel(this.contentForSetupOrg,this),this.indexContentPanel=new t.IndexContentPanel(this.contentForIndexContent,this),this.configureSearchPanel=new t.ConfigureSearchPanel(this.contentForConfigureSearch,this),this.setInitialStep(),this.options.disableSourceStatus&&this.setUnableToReach(2)}return n.prototype.setSourceStatus=function(e){this.indexContentPanel.setSourcesStatus(e)},n.prototype.resetError=function(e){e.removeClass("coveo-active"),e.empty()},n.prototype.addError=function(e,t){e.addClass("coveo-active"),e.append(t)},n.prototype.setAsFinished=function(e){this.headers[e-1].addClass("coveo-finished"),this.setUnableToReach(e)},n.prototype.setUnableToReach=function(e){this.headers[e-1].off("click")},n.prototype.setActive=function(t){var n=this;location.hash=e.HashUtils.encodeValues({step:t}),2==t?this.sourceRefreshInterval=setInterval(function(){return n.refreshInternally()},5e3):void 0!=this.sourceRefreshInterval&&clearInterval(this.sourceRefreshInterval),this.switchActive(this.headers[t-1],this.headers),this.switchActive(this.content[t-1],this.content)},n.prototype.refreshInternally=function(){this.indexContentPanel.prepareRefresh(),this.options.refreshStatus()},n.prototype.setInitialStep=function(){var t=e.HashUtils.getValue("step",e.HashUtils.getHash());(_.isUndefined(t)||1==t||t>3||t<1||isNaN(t))&&(this.setUnableToReach(2),this.setUnableToReach(3),this.setActive(1)),2==t&&(this.setAsFinished(1),this.setActive(2)),3==t&&(this.setAsFinished(1),this.setAsFinished(2),this.setActive(3))},n.prototype.switchActive=function(e,t){e.addClass("coveo-active"),e==this.contentForIndexContent&&this.refreshInternally(),_.chain(t).reject(function(t){return t==e}).each(function(e){e.removeClass("coveo-active")})},n.defaultOptions={userName:"Anonymous User",userEmail:"anonymoususer@anonymous.com",baseResourcesUrl:"",refreshStatus:function(){},onCreateOrg:function(e,t,n,o){},onLinkToExistingCloud:function(){},onLinkToExistingOnPrem:function(e){},onPremUrl:"",searchPageConfigurationUrl:"https://onlinehelp.coveo.com",panelConfigurationUrl:"https://onlinehelp.coveo.com",disableSourceStatus:!1},n}();t.ProvisioningPanel=n}(t=e.Provisioning||(e.Provisioning={}))}(Coveo||(Coveo={}));